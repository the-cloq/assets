const btn=document.getElementById("submitBtn");let timeoutId,isExpanded=!1,isScrollLocked=!1;const scrollUpTimeout=800,fadeDuration=300,panels=document.querySelectorAll(".tab_panel"),lastScrollTops=Array.from({length:panels.length},(()=>0));function expandLozenge(e){clearTimeout(timeoutId),btn.classList.add("expanded"),btn.classList.remove("fading"),isExpanded=!0,timeoutId=setTimeout((()=>collapseLozenge()),e)}function collapseLozenge(){clearTimeout(timeoutId),btn.classList.add("fading"),setTimeout((()=>{btn.classList.remove("expanded"),btn.classList.remove("fading"),isExpanded=!1}),fadeDuration)}panels.forEach(((e,t)=>{e.addEventListener("scroll",(()=>{if("false"===e.getAttribute("aria-hidden")){const o=e.scrollTop;o>lastScrollTops[t]?(isExpanded&&collapseLozenge(),isScrollLocked=!0):o<lastScrollTops[t]&&(isScrollLocked&&!isExpanded&&expandLozenge(800),isScrollLocked=!1),lastScrollTops[t]=o}}))})),btn.addEventListener("click",(()=>{expandLozenge(3e3)}));
